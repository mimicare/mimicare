# ==========================================
# MIMICARE - Environment Configuration
# ==========================================
# Comprehensive Maternal & Child Care Platform
# Copy this file to .env and update the values
# For local development, the default values work out of the box with Docker/Podman


# ==========================================
# DATABASE (PostgreSQL with pgvector)
# ==========================================
# Default: Uses Docker/Podman PostgreSQL on port 5434
DATABASE_URL="postgresql://postgres:123@localhost:5434/mimicare?schema=public"

# Database connection settings (used in docker-compose)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=123
POSTGRES_DB=mimicare


# ==========================================
# ENVIRONMENT
# ==========================================
NODE_ENV="development"


# ==========================================
# BACKEND & FRONTEND
# ==========================================
BACKEND_PORT=8000
FRONTEND_PORT=5173
FRONTEND_URL="http://localhost:5173"
BACKEND_URL="http://localhost:8000"


# ==========================================
# JWT TOKENS
# ==========================================
# IMPORTANT: Generate secure random strings for production
# Example command: openssl rand -base64 32
JWT_ACCESS_TOKEN_SECRET=your-super-secret-access-key-change-in-production-min-32-chars
JWT_REFRESH_TOKEN_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars
JWT_ACCESS_TOKEN_EXPIRATION=15m
JWT_REFRESH_TOKEN_EXPIRATION=7d


# ==========================================
# API KEY ENCRYPTION (32 bytes = 64 hex chars)
# ==========================================
# IMPORTANT: Generate a secure 64-character hex string for production
# Example command: openssl rand -hex 32
API_KEY_ENCRYPTION_SECRET=ba9272943ba14f17c59563493adb747112e4a13dcdb22cea641b6b86779f97a9


# ==========================================
# OAUTH PROVIDERS (Optional)
# ==========================================
# To enable OAuth, create apps at:
# - Google: https://console.cloud.google.com/apis/credentials
# - Apple: https://developer.apple.com/account/resources/identifiers/list

# Google OAuth
GOOGLE_CLIENT_ID=xx-xx.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=xx-xxxx
GOOGLE_CALLBACK_URL=http://localhost:8000/api/v1/auth/google/callback

# Apple OAuth (for iOS app)
APPLE_CLIENT_ID=your-apple-client-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY_PATH=/path/to/apple/private/key.p8
APPLE_CALLBACK_URL=http://localhost:8000/api/v1/auth/apple/callback


# ==========================================
# AWS CONFIGURATION
# ==========================================
AWS_REGION=ap-south-1


# ==========================================
# AWS LOCALSTACK (Local Development - Default)
# ==========================================
# LocalStack emulates AWS services locally
# No real AWS account required for local development
# These defaults work with docker-compose/podman-compose

# LocalStack Endpoint
AWS_ENDPOINT_URL=http://localhost:4566

# SES (Email Service - for appointment reminders, notifications)
AWS_SES_ACCESS_KEY_ID=test
AWS_SES_SECRET_ACCESS_KEY=test
AWS_SES_NO_REPLY_EMAIL=noreply@mimicare.local
AWS_SES_SUPPORT_EMAIL=support@mimicare.local
AWS_SES_APPOINTMENT_EMAIL=appointments@mimicare.local

# S3 (File Storage - medical records, ultrasound images, documents)
AWS_S3_ACCESS_KEY_ID=test
AWS_S3_SECRET_ACCESS_KEY=test
AWS_S3_BUCKET_NAME=mimicare-files-dev
AWS_S3_MEDICAL_RECORDS_BUCKET=mimicare-medical-records-dev
AWS_S3_IMAGES_BUCKET=mimicare-images-dev
AWS_S3_REGION=ap-south-1
AWS_S3_ENDPOINT=http://localhost:4566

# DynamoDB (NoSQL Database - for sessions, chat history, real-time data)
AWS_DYNAMODB_ACCESS_KEY_ID=test
AWS_DYNAMODB_SECRET_ACCESS_KEY=test
AWS_DYNAMODB_ENDPOINT=http://localhost:4566
AWS_DYNAMODB_REGION=ap-south-1

# DynamoDB Table Names
AWS_DYNAMODB_APPOINTMENT_TABLE=mimicare-appointments-dev
AWS_DYNAMODB_SESSION_TABLE=mimicare-sessions-dev
AWS_DYNAMODB_CHAT_TABLE=mimicare-chat-history-dev
AWS_DYNAMODB_NOTIFICATION_TABLE=mimicare-notifications-dev
AWS_DYNAMODB_VITAL_SIGNS_TABLE=mimicare-vital-signs-dev
AWS_DYNAMODB_BABY_TRACKER_TABLE=mimicare-baby-tracker-dev

# SQS (Queue Service - for async tasks like notifications, reminders)
AWS_SQS_ACCESS_KEY_ID=test
AWS_SQS_SECRET_ACCESS_KEY=test
AWS_SQS_ENDPOINT=http://localhost:4566
AWS_SQS_NOTIFICATION_QUEUE_URL=http://localhost:4566/000000000000/mimicare-notifications-dev
AWS_SQS_APPOINTMENT_QUEUE_URL=http://localhost:4566/000000000000/mimicare-appointments-dev
AWS_SQS_EMAIL_QUEUE_URL=http://localhost:4566/000000000000/mimicare-emails-dev


# ==========================================
# PRODUCTION AWS (Optional)
# ==========================================
# Uncomment and configure these for production deployment with real AWS
# Make sure to comment out LocalStack settings above

# # Production SES
# AWS_SES_ACCESS_KEY_ID=your-aws-access-key
# AWS_SES_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_SES_NO_REPLY_EMAIL=noreply@mimicare.com
# AWS_SES_SUPPORT_EMAIL=support@mimicare.com
# AWS_SES_APPOINTMENT_EMAIL=appointments@mimicare.com

# # Production S3
# AWS_S3_ACCESS_KEY_ID=your-aws-access-key
# AWS_S3_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_S3_BUCKET_NAME=mimicare-files-prod
# AWS_S3_MEDICAL_RECORDS_BUCKET=mimicare-medical-records-prod
# AWS_S3_IMAGES_BUCKET=mimicare-images-prod
# AWS_S3_REGION=ap-south-1
# # AWS_S3_ENDPOINT=  # Leave empty for real AWS

# # Production DynamoDB
# AWS_DYNAMODB_ACCESS_KEY_ID=your-aws-access-key
# AWS_DYNAMODB_SECRET_ACCESS_KEY=your-aws-secret-key
# # AWS_DYNAMODB_ENDPOINT=  # Leave empty for real AWS
# AWS_DYNAMODB_REGION=ap-south-1

# # Production SQS
# AWS_SQS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SQS_SECRET_ACCESS_KEY=your-aws-secret-key
# # AWS_SQS_ENDPOINT=  # Leave empty for real AWS
# AWS_SQS_NOTIFICATION_QUEUE_URL=https://sqs.ap-south-1.amazonaws.com/account/mimicare-notifications-prod
# AWS_SQS_APPOINTMENT_QUEUE_URL=https://sqs.ap-south-1.amazonaws.com/account/mimicare-appointments-prod
# AWS_SQS_EMAIL_QUEUE_URL=https://sqs.ap-south-1.amazonaws.com/account/mimicare-emails-prod


# ==========================================
# REDIS (Cache & Session Store)
# ==========================================
# Default: Uses Docker/Podman Compose Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=mimicare123
REDIS_TLS_ENABLED=false
REDIS_DB=0

# Production Redis (Uncomment for AWS ElastiCache)
# REDIS_HOST=your-elasticache-endpoint.cache.amazonaws.com
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_TLS_ENABLED=true


# ==========================================
# QUEUE CONFIGURATION
# ==========================================
# Options: 'redis' (local) or 'sqs' (AWS production)
QUEUE_BACKEND=redis

# Production SQS Configuration
# QUEUE_BACKEND=sqs


# ==========================================
# TELEMEDICINE & VIDEO CALLS
# ==========================================
# For video consultation features
# Get credentials from: https://console.twilio.com or https://aws.amazon.com/chime/


# AWS Chime SDK (for production video calls)
# AWS_CHIME_APP_INSTANCE_ARN=your-chime-app-instance-arn
# AWS_CHIME_ACCESS_KEY_ID=your-aws-access-key
# AWS_CHIME_SECRET_ACCESS_KEY=your-aws-secret-key

# AWS SNS (for production SMS)
# AWS_SNS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SNS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_SNS_REGION=ap-south-1


# ==========================================
# PUSH NOTIFICATIONS
# ==========================================
# For mobile app push notifications
# Get credentials from: https://console.firebase.google.com

# Firebase Cloud Messaging (FCM)
FCM_SERVER_KEY=your-fcm-server-key
FCM_PROJECT_ID=your-firebase-project-id
FCM_PRIVATE_KEY=your-firebase-private-key
FCM_CLIENT_EMAIL=your-firebase-client-email


# ==========================================
# PAYMENT GATEWAY
# ==========================================
# For consultation fees and subscriptions
# Get credentials from: https://dashboard.stripe.com or https://dashboard.razorpay.com

# Stripe (International)
STRIPE_PUBLISHABLE_KEY=pk_test_your_key
STRIPE_SECRET_KEY=sk_test_your_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Razorpay (India)
RAZORPAY_KEY_ID=rzp_test_your_key
RAZORPAY_KEY_SECRET=your_razorpay_secret
RAZORPAY_WEBHOOK_SECRET=your_webhook_secret


# ==========================================
# MEDICAL DATA & FHIR
# ==========================================
# For healthcare data standards compliance
FHIR_SERVER_URL=http://localhost:8080/fhir
FHIR_VERSION=R4
ENABLE_FHIR_INTEGRATION=false

# Production FHIR Server (Uncomment for production)
# FHIR_SERVER_URL=https://your-fhir-server.com/fhir
# FHIR_API_KEY=your-fhir-api-key
# ENABLE_FHIR_INTEGRATION=true


# ==========================================
# AI/ML FEATURES
# ==========================================
# For pregnancy insights, health recommendations
# Get your API keys from:
# - OpenAI: https://platform.openai.com/api-keys
# - Google AI: https://makersuite.google.com/app/apikey

OPENAI_API_KEY=your-openai-api-key
GOOGLE_AI_API_KEY=your-google-ai-api-key


# ==========================================
# FILE UPLOAD LIMITS
# ==========================================
MAX_FILE_SIZE=52428800  # 50MB for medical records
MAX_IMAGE_SIZE=10485760  # 10MB for ultrasound images
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,dcm  # DICOM for medical images


# ==========================================
# SECURITY & COMPLIANCE
# ==========================================
# HIPAA/Healthcare compliance settings
ENABLE_AUDIT_LOGS=true
ENABLE_DATA_ENCRYPTION=true
SESSION_TIMEOUT=1800  # 30 minutes
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=1800  # 30 minutes


# ==========================================
# FRONTEND (Flutter App & Admin Dashboard)
# ==========================================
VITE_API_URL="http://localhost:8000/api/v1"
VITE_WS_URL="ws://localhost:8000"
# IMPORTANT: Generate a secure 32-character key for production
VITE_TOKEN_ENCRYPTION_KEY=your_super_secure_32_character_key_here_change_in_production

# Flutter App Configuration
FLUTTER_API_BASE_URL=http://localhost:8000/api/v1
FLUTTER_WS_URL=ws://localhost:8000
FLUTTER_APP_VERSION=1.0.0


# ==========================================
# CONTAINER RUNTIME
# ==========================================
# For LOCAL development (use pre-loaded images, no pulling):
IMAGE_REGISTRY=localhost/
PULL_POLICY=never

# For CLOUD development (pull from Docker Hub), uncomment below and comment above:
# IMAGE_REGISTRY=docker.io/
# PULL_POLICY=missing


# ==========================================
# PROXY CONFIGURATION (Optional)
# ==========================================
# Set these if you're behind a corporate proxy
# Leave empty or commented out if not needed
# HTTP_PROXY=http://localhost:8080
# HTTPS_PROXY=http://localhost:8080


# ==========================================
# MONITORING & LOGGING
# ==========================================
# Enable detailed logging for debugging
LOG_LEVEL=debug  # Options: debug, info, warn, error
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=true

# ==========================================
# RATE LIMITING
# ==========================================
# API rate limiting configuration
RATE_LIMIT_WINDOW=900  # 15 minutes in seconds
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_ENABLED=true
